<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Do you REALLY understand floating points? | oded.dev</title><meta content="width=device-width,initial-scale=1,maximum-scale=1" name="viewport"><link href="https://oded.dev/atom.xml" rel="alternate" type="application/atom+xml" title="oded.dev"><link href="/fonts/fontawesome/fontawesome.woff" rel="preload" type="font/woff" as="font" crossorigin><link href="/fonts/fontawesome/fontawesome.ttf" rel="preload" type="font/ttf" as="font" crossorigin><link href="/fonts/open-sans/open-sans.woff2" rel="preload" type="font/woff2" as="font" crossorigin><link href="/fonts/open-sans/open-sans-semi-bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin><link href="/fonts/open-sans/open-sans-italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin><link href="/fonts/source-code-pro/source-code-pro.woff2" rel="preload" type="font/woff2" as="font" crossorigin><style>@font-face{font-family:FontAwesome;src:url(https://oded.dev/fonts/fontawesome/fontawesome.ttf) format('truetype'),url(https://oded.dev/fonts/fontsawesome/fontawesome.woff) format('woff');font-weight:400;font-style:normal}[class*=" fa-"],[class^=fa-]{font-family:FontAwesome!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-search:before{content:"\f002"}.fa-tag:before{content:"\f02b"}.fa-map-marker:before{content:"\f041"}.fa-arrow-up:before{content:"\f062"}.fa-mail-forward:before,.fa-share:before{content:"\f064"}.fa-calendar:before{content:"\f073"}.fa-folder:before{content:"\f07b"}.fa-twitter:before{content:"\f099"}.fa-facebook-f:before,.fa-facebook:before{content:"\f09a"}.fa-github:before{content:"\f09b"}.fa-feed:before,.fa-rss:before{content:"\f09e"}.fa-pinterest:before{content:"\f0d2"}.fa-google-plus:before{content:"\f0d5"}.fa-caret-down:before{content:"\f0d7"}.fa-caret-right:before{content:"\f0da"}.fa-linkedin:before{content:"\f0e1"}.fa-angle-right:before{content:"\f105"}.fa-angle-up:before{content:"\f106"}.fa-quote-left:before{content:"\f10d"}.fa-quote-right:before{content:"\f10e"}.fa-google:before{content:"\f1a0"}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;src:local('Open Sans'),local('OpenSans'),url(https://oded.dev/fonts/open-sans/open-sans.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215,U+E0FF,U+EFFD,U+F000}@font-face{font-family:'Open Sans';font-style:normal;font-weight:600;src:local('Open Sans Semibold'),local('OpenSans-Semibold'),url(https://oded.dev/fonts/open-sans/open-sans-semi-bold.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215,U+E0FF,U+EFFD,U+F000}@font-face{font-family:'Open Sans';font-style:italic;font-weight:400;src:local('Open Sans Italic'),local('OpenSans-Italic'),url(https://oded.dev/fonts/open-sans/open-sans-italic.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215,U+E0FF,U+EFFD,U+F000}@font-face{font-family:'Source Code Pro';font-style:normal;font-weight:400;src:local('Source Code Pro'),local('SourceCodePro-Regular'),url(https://oded.dev/fonts/source-code-pro/source-code-pro.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215,U+E0FF,U+EFFD,U+F000}</style><style>.highlight{margin:0;display:block;overflow-x:auto;padding:15px 20px;font-size:14px;font-family:"Source Code Pro",Consolas,Monaco,Menlo,Consolas,monospace;line-height:22.400000000000002px;color:#333;background:#f8f8f8}.highlight table{margin:0!important;width:auto}.highlight table td{border:0}.highlight table td.code{padding-right:20px}.highlight .gutter pre{color:#666;text-align:right;padding-right:20px}.article-entry .highlight{margin:1.6em 0}.article-entry .highlight .line{height:1.6em}.highlight .code .comment,.highlight .code .quote{color:#998;font-style:italic}.highlight .code .keyword,.highlight .code .selector-tag{color:#333;font-weight:700}.highlight .code .subst{color:#333}.highlight .code .literal,.highlight .code .number,.highlight .code .tag .attr,.highlight .code .template-variable,.highlight .code .variable{color:teal}.highlight .code .doctag,.highlight .code .string{color:#d14}.highlight .code .section,.highlight .code .selector-id,.highlight .code .title{color:#900;font-weight:700}.highlight .code .subst{font-weight:400}.highlight .code .class .title,.highlight .code .type{color:#458;font-weight:700}.highlight .code .attribute,.highlight .code .name,.highlight .code .tag{color:navy;font-weight:400}.highlight .code .link,.highlight .code .regexp{color:#009926}.highlight .code .bullet,.highlight .code .symbol{color:#990073}.highlight .code .built_in,.highlight .code .builtin-name{color:#0086b3}.highlight .code .meta{color:#999;font-weight:700}.highlight .code .deletion{background:#fdd}.highlight .code .addition{background:#dfd}.highlight .code .emphasis{font-style:italic}.highlight .code .strong{font-weight:700}</style><style>#profile .inner .social-links>table,body{width:100%}.outer:after,.outer:before,body:after,body:before{content:"";display:table}.outer:after,body:after{clear:both}a,abbr,acronym,address,applet,big,blockquote,cite,dd,del,dfn,div,dl,dt,em,fieldset,form,h1,h2,h3,h4,h5,h6,html,iframe,img,ins,kbd,label,legend,li,object,ol,p,pre,q,s,samp,small,span,strike,strong,sub,sup,tbody,tfoot,thead,tr,tt,ul,var{margin:0;padding:0;border:0;outline:0;font-weight:inherit;font-style:inherit;font-family:inherit;font-size:100%;vertical-align:baseline}body,caption,td,th{margin:0;padding:0;border:0}body{outline:0;line-height:1;background:#fff}caption,code,table,td,th{outline:0;font-style:inherit}caption,td,th{font-family:inherit;font-size:100%}code,table{font-weight:inherit}body,code{vertical-align:baseline}caption,table,td,th{vertical-align:middle}table{font-family:inherit;font-size:100%;border-collapse:separate;border-spacing:0}.layout-wrap-inner.list-categories ul ol,.layout-wrap-inner.list-categories ul ul,ol,ul{list-style:none}caption,td,th{text-align:left;font-weight:400}.article-entry iframe,.layout-wrap-inner.list-categories ul ol li,.layout-wrap-inner.list-categories ul ul li,.widget ol ol li,.widget ol ul li,.widget ul ol li,.widget ul ul li,a img,code,table{border:0}button,input,table{margin:0;padding:0}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}#container,body,html{height:100%}body{color:#565a5f;background:#f5f8f9;font:14px "open sans","Helvetica Neue","Microsoft Yahei",Helvetica,Arial,sans-serif;-webkit-text-size-adjust:100%}a{text-decoration:none}a,a:visited{color:#38b7ea}code{margin:0 2px;color:#e96900;padding:3px 5px;font-size:.9em;border-radius:2px;font-family:"Source Code Pro",Consolas,Monaco,Menlo,Consolas,monospace;background-color:#f8f8f8}.outer{max-width:1320px;margin:0 auto;padding:0 20px}@media screen and (max-width:559px){.outer{padding:0}}.alignleft,.left{float:left}.alignright,.right{float:right}.clear{clear:both}.logo{width:40px;height:40px;background-repeat:no-repeat;background-image:url();background-size:40px 40px}#container{position:relative}#container>.outer{margin-bottom:30px}@media screen and (min-width:1200px){#main{display:inline;float:left;width:52.307692307692314%;margin:0 .769230769230769%}}@media screen and (min-width:800px) and (max-width:1199px){#main{display:inline;float:left;width:67.6923076923077%;margin:0 .769230769230769%}}@media screen and (min-width:560px) and (max-width:799px){#main{width:100%}}@media screen and (max-width:559px){#main{width:100%}}#header a,#header a:visited,.archive-article-header a,.archive-article-header a:visited,.layout-wrap-inner.tag-cloud a,.layout-wrap-inner.tag-cloud a:visited,.timeline-row .content h1 a,.timeline-row .content h1 a:visited{color:#565a5f;transition:.2s ease}.archive-article-header a:hover,.archive-article-header a:visited:hover,.layout-wrap-inner.tag-cloud a:hover,.layout-wrap-inner.tag-cloud a:visited:hover,.timeline-row .content h1 a:hover,.timeline-row .content h1 a:visited:hover{color:#38b7ea}.archive-year{line-height:1em}.archive-year,.article-meta,.widget-title{text-decoration:none;text-transform:uppercase}.widget-title{line-height:1em}#comments{background:#fff}#comments,#header,#profile .inner{box-shadow:0 1px 2px rgba(0,0,0,.05)}#toTop,.archive-article,.article-inner,.timeline-row .content{background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.05)}.article-entry h1,.widget h1{font-size:2em}.article-entry h2,.widget h2{font-size:1.5em}.article-entry h3,.widget h3{font-size:1.3em}.article-entry h4,.widget h4{font-size:1.2em}.article-entry h5,.widget h5{font-size:1em}.article-entry h6,.widget h6{font-size:1em;color:#999}.article-entry hr,.widget hr{border:1px dashed #eceff2}.article-entry dt,.article-entry h1,.article-entry h2,.article-entry h3,.article-entry h4,.article-entry h5,.article-entry h6,.article-entry strong,.widget dt,.widget strong{font-weight:700}.article-entry cite,.article-entry em,.widget cite,.widget em{font-style:italic}.article-entry sub,.article-entry sup,.widget sub,.widget sup{font-size:.75em;line-height:0;position:relative;vertical-align:baseline}.article-entry sup,.widget sup{top:-.5em}.article-entry sub,.widget sub{bottom:-.2em}.article-entry small,.widget small{font-size:.85em}.article-entry abbr,.article-entry acronym,.widget abbr,.widget acronym{border-bottom:1px dotted}.article-entry dl,.article-entry ol,.article-entry ul,.widget dl{margin:0 20px;line-height:1.6em}.widget ol,.widget ul{line-height:1.6em}.article-entry ol ol,.article-entry ol ul,.article-entry ul ol,.article-entry ul ul{margin-top:0;margin-bottom:0}.article-entry ul{list-style:disc}.article-entry ol{list-style:decimal}#header{background:#fff;position:relative}#header a,#header a:visited{white-space:nowrap}#header a:hover{color:#38b7ea}#main-nav,#search-form-wrap,#sub-nav,.header-inner #logo{height:40px;line-height:40px;padding:12px 15px}#main-nav,#sub-nav #profile-nav .avatar,#sub-nav #profile-nav .fa,.header-inner #logo{float:left}#search-form-wrap,#sub-nav{float:right}.header-inner{height:100%;position:relative}.header-inner #logo{display:inline-block}.header-inner #logo .logo{margin-right:5px;display:inline-block}.header-inner #logo .site-title{font-size:16px;display:inline-block;vertical-align:top;font-weight:600}#header-title{text-align:center;height:40px;position:absolute;top:50%;left:0;margin-top:-20px}.header-sub{border-top:1px solid #eceff2}.header-sub ul{margin:0 15px}#main-nav-mobile .menu:after,#main-nav-mobile .menu:before,#sub-nav #profile-nav #profile-anchor:after,#sub-nav #profile-nav #profile-anchor:before,.header-sub ul:after,.header-sub ul:before{content:"";display:table}#main-nav-mobile .menu:after,#sub-nav #profile-nav #profile-anchor:after,.header-sub ul:after{clear:both}.header-sub ul li{float:left;margin:0 10px}.header-sub .main-nav-link,.header-sub ul li a{display:inline-block;line-height:48px}@media screen and (min-width:560px) and (max-width:799px){#header-sub{display:none}}@media screen and (max-width:559px){#header-sub{display:none}}@media screen and (min-width:560px) and (max-width:799px){#main-nav{display:none}}@media screen and (max-width:559px){#main-nav{display:none}}@media screen and (min-width:800px) and (max-width:1199px){#main-nav-mobile{display:none}}@media screen and (min-width:1200px){#main-nav-mobile{display:none}}.main-nav-link,.nav-icon{float:left;display:block;padding:0 15px}.nav-icon{text-align:center;font-size:14px;width:14px;position:relative;cursor:pointer;height:40px!important;line-height:40px!important}.main-nav-link{font-weight:300}@media screen and (min-width:1200px){#sub-nav{display:none}}#sub-nav #profile-nav #profile-anchor{display:block;height:40px;line-height:40px}#sub-nav #profile-nav .avatar{width:40px;height:40px;margin-right:8px}#sub-nav #profile-nav .fa{line-height:40px}@media screen and (max-width:559px){#search-form-wrap{display:none}}#search-form-wrap .search-form{position:relative}#search-form-wrap .search-form .search-form-input{width:100%;padding:0 30px 0 15px;line-height:40px;height:40px!important;border-radius:21px}#search-form-wrap .search-form .search-form-input::-webkit-search-cancel-button,#search-form-wrap .search-form .search-form-input::-webkit-search-results-decoration,.search-form-input.ins-search-input::-webkit-search-cancel-button,.search-form-input.ins-search-input::-webkit-search-results-decoration,.search-form-input.st-default-search-input::-webkit-search-cancel-button,.search-form-input.st-default-search-input::-webkit-search-results-decoration,.search-form-input.st-ui-search-input::-webkit-search-cancel-button,.search-form-input.st-ui-search-input::-webkit-search-results-decoration,.search-form-input::-webkit-search-cancel-button,.search-form-input::-webkit-search-results-decoration{-webkit-appearance:none}#search-form-wrap .search-form .search-form-submit{top:50%;right:15px;border:0;cursor:pointer;margin-top:-7px;background:0 0;position:absolute;font:13px font-icon;font-family:FontAwesome}#search-form-wrap .search-form .search-form-submit:before{content:'\f002'}#search-form-wrap .search-form .search-form-submit:focus,#search-form-wrap .search-form .search-form-submit:hover{color:#777}.search-form-input,.search-form-input.ins-search-input,.search-form-input.st-default-search-input,.search-form-input.st-ui-search-input{-webkit-appearance:textarea;-moz-appearance:textarea;appearance:textarea;padding:0;width:200px;box-shadow:none;color:#565a5f;transition:.2s ease;box-sizing:border-box;height:auto!important;line-height:1.6em;outline:0!important;background:0 0!important;font:14px "open sans","Helvetica Neue","Microsoft Yahei",Helvetica,Arial,sans-serif;border:1px solid #eceff2!important}.search-form-input.ins-search-input:focus,.search-form-input.st-default-search-input:focus,.search-form-input.st-ui-search-input:focus,.search-form-input:focus{border-color:#38b7ea!important}#main-nav-mobile{overflow-y:hidden;overflow-x:auto}#main-nav-mobile .menu{margin:0;height:48px}#main-nav-mobile .menu .search-form-input{display:none;padding:0 10px;margin-right:15px;height:32px;line-height:32px;border-radius:16px}@media screen and (max-width:559px){#main-nav-mobile .menu .search-form-input{display:block}}#main-nav-mobile .menu .search-form-input::-webkit-search-cancel-button,#main-nav-mobile .menu .search-form-input::-webkit-search-results-decoration{-webkit-appearance:none}.bio{text-align:center}#profile .inner .bio h2{font-size:1.3em;font-weight:700;margin-top:15px}#profile .inner .bio p{margin:5px 20px 10px;text-align:justify;max-width:300px;line-height:1.5em}.profile-block{padding:15px 20px;border-bottom:1px solid #eceff2}.profile-block:last-child{border-bottom:none}#profile{float:left;width:21.53846153846154%;margin:0 .769230769230769%;display:none}@media screen and (min-width:1200px){#profile{display:block}}#profile .inner{margin-top:40px;background:#fff}#profile .inner .base-info #avatar{display:block;margin:10px auto 20px;width:128px;height:128px}#profile .inner .base-info #location,#profile .inner .base-info #name,#profile .inner .base-info #title{display:block;text-align:center}#profile .inner .base-info #name{font-size:20px;font-weight:600}#profile .inner .base-info #location{font-size:12px;margin-top:5px;color:#9a9ea3}#profile .inner .base-info #location .fa{margin-right:5px}#profile .inner .base-info #follow{color:#fff;width:150px;height:40px;display:block;font-size:14px;line-height:40px;text-align:center;margin:20px auto 10px;background:#38b7ea;border-radius:20px;transition:.2s ease}#profile .inner .base-info #follow:hover{background:#49c8fb}#profile .inner .article-info{padding:0}#profile .inner .article-info:after,#profile .inner .article-info:before,.article-meta:after,.article-meta:before{content:"";display:table}#profile .inner .article-info:after,.article-meta:after{clear:both}#profile .inner .article-info .article-info-block{width:50%;float:left;padding:20px 15px;text-align:center;box-sizing:border-box;font-size:20px}#profile .inner .article-info .article-info-block span{display:block;font-size:14px;text-transform:uppercase}#profile .inner .article-info .article-info-block:first-child{border-right:1px solid #eceff2}#profile .inner .social-links>table td{text-align:center;font-size:24px}#profile .inner .social-links>table td a{position:relative;transition:.2s ease;color:#898d92}#profile .inner .social-links>table td a:hover,.article-meta a,a.article-title:visited{color:#565a5f}#profile .inner .social-links>table td a.tooltip:hover:after{right:-50%;top:-41px;color:#fff;background:#333;font-size:14px;content:attr(title);display:block;padding:5px 15px;position:absolute;white-space:nowrap;border-radius:2px;text-transform:uppercase;box-shadow:0 0 2px rgba(0,0,0,.2);z-index:1}#profile .inner .social-links>table td a.tooltip:hover:before{top:-12px;right:8px;border:solid;border-color:#333 transparent;border-width:5px 5px 0;content:"";display:block;position:absolute;z-index:2}#profile.card{top:50px;right:20px;z-index:999;display:block;min-width:280px;position:absolute}#profile.card .profile-inner{position:relative;box-shadow:0 2px 5px rgba(0,0,0,.2)}#profile.card .profile-inner:after,#profile.card .profile-inner:before{content:'';top:-20px;right:10px;position:absolute;border-width:10px;border-style:solid}#profile.card .profile-inner:before{z-index:1;border-color:transparent transparent #fff}#profile.card .profile-inner:after{z-index:0;border-color:transparent transparent #dbdee1}.article{margin:40px 0}.article-inner{overflow:hidden}.article-banner{width:100%;height:auto}.article-header{padding:20px 20px 0}.article-header .article-title{display:block;margin-bottom:14px}.article-title{font-size:2em;color:#565a5f;text-decoration:none;line-height:1.3em}#comments a,.article-meta a:hover,a.article-title:hover{color:#38b7ea}@media screen and (max-width:559px){.article-title{font-size:1.6em}}@media screen and (min-width:560px) and (max-width:799px){.article-title{font-size:1.6em}}.article-entry,.article-entry p,.article-meta{line-height:1.6em}.article-meta>div{float:left;margin-right:10px}.article-meta>div .fa{margin-right:3px}.article-category .fa-angle-right{margin:0 5px}.article-tag .tag-link:before{content:"#"}.article-entry{color:#565a5f;padding:0 20px}.article-entry:after,.article-entry:before{content:"";display:table}.article-entry:after{clear:both}.article-entry p{text-align:justify;margin:1.6em 0}.article-entry table{line-height:1.6em;margin:1.6em 0;width:100%;border-collapse:collapse;border-spacing:0}.article-entry h1,.article-entry h2,.article-entry h3,.article-entry h4,.article-entry h5,.article-entry h6{line-height:1.3em;margin:1.3em 0}.article-entry a{color:#38b7ea;text-decoration:none}.article-entry a:hover{text-decoration:underline}.article-entry dl,.article-entry ol,.article-entry ul{margin-top:1.6em;margin-bottom:1.6em}.article-entry img,.article-entry video{max-width:100%;height:auto;display:block;margin:auto}.article-entry th{font-weight:700;border-bottom:3px solid #eceff2;padding-bottom:.5em}.article-entry td{border-bottom:1px solid #eceff2;padding:10px 0}.article-entry blockquote{position:static;font-family:Georgia,"Times New Roman","Microsoft Yahei",serif;font-size:1.1em;margin:0 -20px;padding:10px 20px 10px 54px;background:#fcfcfc;border-left:4px solid #eee}.article-entry blockquote:before{top:20px;left:10px;content:"\f10d";color:#e2e2e2;font-size:32px;font-family:FontAwesome;text-align:center;position:static}.article-entry blockquote footer{font-size:14px;margin:1.6em 0;font-family:"open sans","Helvetica Neue","Microsoft Yahei",Helvetica,Arial,sans-serif}.article-entry blockquote footer cite:before{content:"—";padding:0 .5em}.article-entry .pullquote{text-align:left;width:45%;margin:0}.article-entry .pullquote.left{margin-left:.5em;margin-right:1em}.article-entry .pullquote.right{margin-right:.5em;margin-left:1em}.article-entry .caption{color:#999;display:block;font-size:.9em;margin-top:.5em;position:relative;text-align:center}.article-entry .video-container{position:relative;padding-top:56.25%;height:0;overflow:hidden}.article-entry .video-container embed,.article-entry .video-container iframe,.article-entry .video-container object{position:absolute;top:0;left:0;width:100%;height:100%;margin-top:0}.article-more-link a{display:inline-block;line-height:1em;padding:6px 15px;border-radius:15px;background:#f5f8f9;text-shadow:0 1px #fff}.article-more-link a:hover{background:#38b7ea;color:#fff;text-decoration:none;text-shadow:0 1px #169cd2}.article-footer{font-size:.85em;line-height:1.6em;border-top:1px solid #eceff2;padding-top:1.6em;margin:0 20px 20px}#article-nav:after,#article-nav:before,.article-footer:after,.article-footer:before{content:"";display:table}#article-nav:after,.article-footer:after{clear:both}.article-footer a,.article-more-link a{color:#999;text-decoration:none}.article-footer a:hover{color:#565a5f}.article-comment-link,.share-container{float:right}.article-comment-link:before{content:"\f075";font-family:FontAwesome;padding-right:5px}.article-share-link{float:right;cursor:pointer;margin-left:20px}.article-share-link .fa-share,.tagcloud a{margin-right:5px}#article-nav{position:relative}@media screen and (min-width:1200px){#article-nav{margin:40px 0}#article-nav:before{width:8px;height:8px;position:absolute;top:50%;left:50%;margin-top:-4px;margin-left:-4px;content:"";border-radius:50%;background:#787c81}}.article-nav-link-wrap{text-decoration:none;color:#999;box-sizing:border-box;margin-top:40px;text-align:center;display:block}.article-nav-link-wrap:hover{color:#565a5f}@media screen and (min-width:1200px){.article-nav-link-wrap{width:50%;margin-top:0}#article-nav-newer{float:left;text-align:right;padding-right:20px}#article-nav-older{float:right;text-align:left;padding-left:20px}}.article-nav-caption{letter-spacing:2px;line-height:1em;font-weight:700;color:#565a5f;text-transform:uppercase}#article-nav-newer .article-nav-caption{margin-right:-2px}.article-nav-title{font-size:.85em;margin-top:.5em;color:#565a5f;line-height:1.6em}.article-share-box{position:absolute;display:none;background:#fff;box-shadow:0 2px 2px rgba(0,0,0,.1);border-radius:3px;margin-left:-145px;overflow:hidden;z-index:1}.article-share-box.on{display:block}.article-share-input{width:100%;background:0 0;box-sizing:border-box;font:14px "open sans","Helvetica Neue","Microsoft Yahei",Helvetica,Arial,sans-serif;padding:0 10px;color:#565a5f;outline:0;border:1px solid #eceff2;border-radius:3px 3px 0 0;height:36px;line-height:36px}.article-share-links{background:#f5f8f9}.article-share-links:after,.article-share-links:before{content:"";display:table}.article-share-links:after{clear:both}.article-share-facebook,.article-share-google,.article-share-pinterest,.article-share-twitter{width:50px;height:36px;display:block;float:left;position:relative;color:#999;text-shadow:0 1px #fff}.article-share-facebook:before,.article-share-google:before,.article-share-pinterest:before,.article-share-twitter:before{font-size:20px;width:20px;height:20px;position:absolute;top:50%;left:50%;margin-top:-10px;margin-left:-10px;text-align:center}.article-share-facebook:hover,.article-share-google:hover,.article-share-pinterest:hover,.article-share-twitter:hover{color:#fff}.article-share-twitter:hover{background:#00aced;text-shadow:0 1px #008abe}.article-share-facebook:hover{background:#3b5998;text-shadow:0 1px #2f477a}.article-share-pinterest:hover{background:#cb2027;text-shadow:0 1px #a21a1f}.article-share-google:hover{background:#dd4b39;text-shadow:0 1px #be3221}.toc-article{background:#f9f9f9;margin:2em 0 0 .2em;padding:1em;border-radius:0}.toc-article .toc-title{font-size:120%}.toc-article strong{padding:.3em 1}ol.toc{width:100%;margin:1em 2em 0 0}#toc{line-height:1em;font-size:.8em;float:right}#toc .toc{padding:0}#toc .toc li{list-style-type:none}#toc .toc-child{padding-left:0}#toc.toc-aside{display:none;width:13%;position:fixed;right:2%;top:320px;overflow:hidden;line-height:1.5em;font-size:1em;color:color-heading;opacity:.6;transition:opacity 1s ease-out}#toc.toc-aside strong{padding:.3em 0;color:color-font}#toc.toc-aside:hover{transition:opacity .3s ease-out;opacity:1}#toc.toc-aside a{transition:color 1s ease-out}#toc.toc-aside a:hover{color:color-theme;transition:color .3s ease-out}.article.rtl .article-entry p,.article.rtl .article-title{direction:rtl}.article.rtl .article-meta>div{float:right;margin-left:10px;margin-right:0}#comments{padding:20px;background-color:transparent;margin:40px 0}.archives:after,.archives:before{content:"";display:table}.archives:after{clear:both}.archives .article:first-child{margin:20px 0}.archive-category-wrap,.archive-tag-wrap,.archive-year-wrap,.layout-title{font-size:1.4em;margin:40px 0 20px}@media screen and (max-width:559px){.archive-category-wrap,.archive-tag-wrap,.archive-year-wrap,.layout-title{padding:0 15px;font-size:1.2em}}.archive-category-wrap .fa,.archive-tag-wrap .fa,.archive-year-wrap .fa,.layout-title .fa{margin-right:3px}.archive-category-wrap .archive-year,.archive-tag-wrap .archive-year,.archive-year-wrap .archive-year,.layout-title .archive-year{color:#565a5f}#recent-post li .item-inner .item-category a,#recent-post li .item-inner a a,.archive-category-wrap .archive-year:hover,.archive-tag-wrap .archive-year:hover,.archive-year-wrap .archive-year:hover,.layout-title .archive-year:hover{color:#38b7ea}@media screen and (max-width:559px){.layout-wrap-inner{padding:0 15px}}.archive-article{page-break-inside:avoid;overflow:hidden;-moz-column-break-inside:avoid;break-inside:avoid-column;padding:0;margin-bottom:15px}#page-nav:after,#page-nav:before,.archive-article:after,.archive-article:before{content:"";display:table}#page-nav:after,.archive-article:after{clear:both}.archive-article.archive-type-summary{padding:15px}.archive-article.archive-type-summary .article-entry{padding:0}.archive-article.archive-type-summary .article-entry p{margin:12px 0}.archive-article .archive-article-content,.archive-article .archive-article-thumbnail{display:table-cell;vertical-align:top}@media screen and (max-width:559px){.archive-article .archive-article-content,.archive-article .archive-article-thumbnail{display:block}}.archive-article .archive-article-thumbnail{width:160px;padding-right:15px}@media screen and (max-width:559px){.archive-article .archive-article-thumbnail{width:100%;padding-bottom:15px}}.archive-article .archive-article-thumbnail .thumbnail{height:0;width:100%;padding-bottom:56.25%;display:block;position:relative;overflow:hidden}#recent-post li .item-thumbnail .thumbnail span,.archive-article .archive-article-thumbnail .thumbnail span{width:100%;height:100%;display:block}#recent-post li .item-thumbnail .thumbnail .thumbnail-image,.archive-article .archive-article-thumbnail .thumbnail .thumbnail-image{position:absolute;background-size:cover;background-position:center}.archive-article .archive-article-thumbnail .thumbnail .thumbnail-none{background-image:url(images/thumb-default-small.png)}.archive-article-title{display:block;font-size:1.6em;line-height:1.4em;margin-bottom:12px}@media screen and (max-width:559px){.archive-article-title{display:block;font-size:1.3em}}.archive-article-date{display:block;margin-top:8px}.layout-wrap-inner.list-categories ul{margin-left:15px;list-style:none}.layout-wrap-inner.list-categories ul .category-list-child,.layout-wrap-inner.list-categories ul li{padding:10px 0;font-size:14px;border-bottom:1px solid border-color}.layout-wrap-inner.list-categories ul .category-list-child a,.layout-wrap-inner.list-categories ul li a{color:#777}.layout-wrap-inner.list-categories ul ol li:last-child,.layout-wrap-inner.list-categories ul ul li:last-child,.widget ol ol li:last-child,.widget ol ul li:last-child,.widget ul ol li:last-child,.widget ul ul li:last-child{padding-bottom:0}.layout-wrap-inner.list-categories li a:before{color:#ccc;content:"\f0da";font-size:12px;margin-right:6px;font-family:FontAwesome;transition:.2s ease}.ins-section .ins-search-item header .fa,.layout-wrap-inner.tag-cloud a{margin-right:8px}.layout-wrap-inner.tag-cloud a:before{content:'#'}#page-nav{margin:40px auto;text-align:center;color:#999;overflow:hidden}#page-nav a,#page-nav span{height:32px;padding:0 10px;line-height:32px;text-align:center;display:inline-block;border-radius:2px}#page-nav a{color:#999;text-decoration:none}#page-nav a:hover{color:#fff;background:#38b7ea}#page-nav .page-number{display:inline-block}@media screen and (max-width:559px){#page-nav .page-number{display:none}}#page-nav .current{color:#565a5f;font-weight:700}.timeline-wrap{margin:40px 20px 40px 40px;border-left:3px solid #eceff2}@media screen and (max-width:559px){.timeline-wrap{margin:40px 20px 40px 30px}}@media screen and (min-width:560px) and (max-width:799px){.timeline-wrap{margin:40px 20px 40px 30px}}.timeline-row{margin:20px 0}#recent-post li:after,#recent-post li:before,.timeline-row:after,.timeline-row:before{content:"";display:table}#recent-post li:after,.timeline-row:after{clear:both}.timeline-row .node,.timeline-row .title{float:left}.timeline-row .node{width:12px;color:#fff;height:12px;border-radius:50%;margin:11px 0 0 -8px;display:inline-block;background-color:#38b7ea}.timeline-row .content{margin-left:25px;position:relative}.timeline-row .content:after,.timeline-row .content:before{content:'';position:absolute;display:inline-block}.timeline-row .content:after{top:10px;left:-14px;border:7px solid transparent;border-right-color:#fff}.timeline-row .content:before{top:9px;left:-16px;border:8px solid transparent;border-right-color:rgba(0,0,0,.05)}.timeline-row .content .article-meta,.timeline-row .content h1{padding:10px}#footer,.timeline-row .content h1{font-size:16px}.timeline-row .content .article-meta{font-size:12px;color:#898d92;border-top:1px solid #f7f7f7;background-color:rgba(244,246,247,.2)}.timeline-row-major .node{width:14px;height:14px;font-size:14px;margin:0 0 0 -17px;padding:6px 8px 10px}.timeline-row-major .title{font-size:18px;margin-left:15px;line-height:30px}#footer{padding:20px 0;border-top:1px solid #eceff2;color:#565a5f;text-align:center}#footer .outer{margin-bottom:0}#footer a{color:#38b7ea}#footer a:hover{text-decoration:underline}#footer-info,.widget{line-height:1.6em;font-size:.85em}@media screen and (min-width:1200px){#sidebar{display:inline;float:left;width:21.53846153846154%;margin:0 .769230769230769%}}@media screen and (min-width:800px) and (max-width:1199px){#sidebar{display:inline;float:left;width:29.230769230769234%;margin:0 .769230769230769%}}.widget{word-wrap:break-word;font-size:.9em}.widget ol,.widget ul{margin:0;list-style:none}.widget ol ol,.widget ol ul,.widget ul ol,.widget ul ul{margin:0 20px}.archive-list-count,.category-list-count,.tag-list-count{padding-left:5px;color:#999;font-size:.85em}.archive-list-count:before,.category-list-count:before,.tag-list-count:before{content:"("}.archive-list-count:after,.category-list-count:after,.tag-list-count:after{content:")"}.widget-wrap{margin:40px 10px}@media screen and (max-width:559px){.widget-wrap{margin:40px 20px}}.widget-title{margin-bottom:0}.widget{padding:15px 5px}#footer a,.widget a{text-decoration:none}#recent-post li .item-inner .item-category a:hover,#recent-post li .item-inner a a:hover,.layout-wrap-inner.list-categories li a:hover:before,.widget a:hover{color:#333}.widget dl dl,.widget dl ol,.widget dl ul,.widget ol dl,.widget ul dl{margin-left:15px;list-style:disc}.widget ol ol,.widget ol ul,.widget ul ol,.widget ul ul{margin-left:15px;list-style:none}.widget ol .category-list-child,.widget ol li,.widget ul .category-list-child,.widget ul li{padding:10px 0;font-size:14px;border-bottom:1px solid border-color}.widget a,.widget ol .category-list-child a,.widget ol li a,.widget ul .category-list-child a,.widget ul li a{color:#777}.widget ol:not(#recent-post) li a:before,.widget ul:not(#recent-post) li a:before{color:#ccc;content:"\f0da";font-size:12px;margin-right:6px;font-family:FontAwesome;transition:.2s ease}.widget ol:not(#recent-post) li a:hover:before,.widget ul:not(#recent-post) li a:hover:before{color:#333}#toTop{cursor:pointer;text-align:center;width:60px;height:60px;font-size:50px;line-height:55px;background:#565a5f;opacity:.8;border-radius:4px;bottom:20px;position:fixed}@media screen and (min-width:560px) and (max-width:799px){#toTop{width:52px;height:52px;font-size:34px;line-height:52px}}@media screen and (max-width:559px){#toTop{width:48px;height:48px;font-size:32px;line-height:48px}}#recent-post li{padding:10px 0 10px 94px}#recent-post.no-thumbnail li{padding:10px 0}#recent-post li .item-thumbnail{opacity:1;float:left;margin-left:-94px;transition:all .2s ease}#recent-post li .item-thumbnail .thumbnail{width:80px;height:80px;display:block;position:relative;overflow:hidden}#recent-post li .item-thumbnail .thumbnail .thumbnail-none{background-image:url(images/thumb-default-small.png);background-size:100% 100%}#recent-post li .item-inner .item-category,#recent-post li .item-inner a{font-size:13px;text-transform:uppercase}#recent-post li .item-inner .item-category .fa,#recent-post li .item-inner .item-category a,#recent-post li .item-inner a .fa,#recent-post li .item-inner a a{margin-right:5px}#recent-post li .item-inner .item-title{font-size:15px}#recent-post li .item-inner .item-title a{color:#333;transition:all .2s ease}#recent-post li .item-inner .item-date{color:#aaa;font-size:13px;text-transform:uppercase}#recent-post li:hover .item-thumbnail{opacity:.8}#recent-post li:hover .item-title a{color:#38b7ea}#toTop,.ins-search{display:none}.ins-search.show{display:block}.ins-selectable{cursor:pointer}.ins-search-container,.ins-search-mask{position:fixed}.ins-search-mask{top:0;left:0;width:100%;height:100%;z-index:100;background:rgba(0,0,0,.5)}.ins-input-wrapper{position:relative}.ins-search-input{width:100%;border:0;outline:0;font-size:16px;box-shadow:none;font-weight:200;border-radius:0;background:#fff;line-height:20px;box-sizing:border-box;padding:12px 28px 12px 20px;border-bottom:1px solid #e2e2e2;font-family:"Microsoft Yahei Light","Microsoft Yahei",Helvetica,Arial,sans-serif}.ins-close{top:50%;right:6px;width:20px;height:20px;font-size:16px;margin-top:-11px;position:absolute;text-align:center;display:inline-block}.ins-close:hover{color:#006bde}.ins-search-container{left:50%;top:100px;z-index:101;bottom:100px;box-sizing:border-box;width:540px;margin-left:-270px}@media screen and (max-width:559px),screen and (max-height:479px){.ins-search-container{top:0;left:0;margin:0;width:100%;height:100%;background:#f7f7f7}}.ins-section-wrapper{left:0;right:0;top:45px;bottom:0;overflow-y:auto;position:absolute}.ins-section-container{position:relative;background:#f7f7f7}.ins-section{font-size:14px;line-height:16px}.ins-section .ins-search-item,.ins-section .ins-section-header{padding:8px 15px}.ins-section .ins-section-header{color:#9a9a9a;border-bottom:1px solid #e2e2e2}.ins-section .ins-slug{margin-left:5px;color:#9a9a9a}.ins-section .ins-slug:before{content:'('}.ins-section .ins-slug:after{content:')'}.ins-section .ins-search-item .ins-search-preview,.ins-section .ins-search-item header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ins-section .ins-search-item .ins-search-preview{height:15px;font-size:12px;color:#9a9a9a;margin:5px 0 0 20px}.ins-section .ins-search-item.active,.ins-section .ins-search-item:hover{color:#fff;background:#006bde}#toTop,.ins-section .ins-search-item.active .ins-search-preview,.ins-section .ins-search-item.active .ins-slug,.ins-section .ins-search-item:hover .ins-search-preview,.ins-section .ins-search-item:hover .ins-slug{color:#fff}</style><link href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css" rel="stylesheet"><meta content="Hexo 5.2.0" name="generator"></head><body><div id="container"><header id="header"><div class="header-inner" id="header-main"><div class="outer"> <a href="/" id="logo"><span class="site-title">oded.dev</span></a><nav id="main-nav"></nav><nav id="sub-nav"><div class="profile" id="profile-nav"> <a href="javascript:;" id="profile-anchor"><img src="/images/logo.jpg" class="avatar"><i class="fa fa-caret-down"></i></a></div></nav><div id="search-form-wrap"><form class="search-form"> <input class="ins-search-input search-form-input" placeholder="Search"> <button class="search-form-submit" type="submit"></button></form></div></div></div><div class="header-inner header-sub" id="main-nav-mobile"><table class="outer menu"><tr><td><div class="search-form"> <input class="ins-search-input search-form-input" placeholder="Search"></div></td></tr></table></div></header><div class="outer"><aside id="profile"><div class="inner profile-inner"><div class="profile-block base-info"> <img src="/images/logo.jpg" id="avatar"><h2 id="name">Oded Lazar</h2><h3 id="title">I code during the day, and think about the bugs I created at night.</h3><span id="location"><i class="fa fa-map-marker"></i> Israel</span> <a href="/about-me" id="follow">ABOUT</a></div><div class="profile-block article-info"><div class="article-info-block"> 100 <span>posts</span></div><div class="article-info-block"> 47 <span>tags</span></div></div><div class="profile-block social-links"><table><tr><td><a href="https://github.com/odedlaz" class="tooltip" title="github" target="_blank"><i class="fa fa-github"></i></a></td><td><a href="https://facebook.com/oded.blog" class="tooltip" title="facebook" target="_blank"><i class="fa fa-facebook"></i></a></td><td><a href="https://linkedin.com/in/odedlaz" class="tooltip" title="linkedin" target="_blank"><i class="fa fa-linkedin"></i></a></td><td><a href="https://oded.dev/atom.xml" class="tooltip" title="rss" target="_blank"><i class="fa fa-rss"></i></a></td></tr></table></div></div></aside><section id="main"><article class="article article-type-post" id="post-Do-you-REALLY-understand-floating-points" itemprop="blogPost" itemscope><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name"> Do you REALLY understand floating points?</h1><div class="article-meta"><div class="article-date"><i class="fa fa-calendar"></i> <a href="/2017/05/01/Do-you-REALLY-understand-floating-points/"><time datetime="2017-05-01T03:15:00.000Z" itemprop="datePublished">2017-05-01</time></a></div><div class="article-category"><i class="fa fa-folder"></i> <a href="/categories/programming/" class="article-category-link">programming</a></div><div class="article-tag"><i class="fa fa-tag"></i> <a href="/tags/c/" class="tag-link-link" rel="tag">c</a></div></div></header><div class="article-entry" itemprop="articleBody"><p>I’m going to ask you a couple of questions. If you answer all of them correctly, and understand why - good job! this post is not for you.</p><p>Otherwise, If you’re a normal human being, consider reading this post. It’ll save you hours of useless debugging. Honestly, If the engineering who built Ariane V read it (and set their compiler to <em>warning as error</em>) their rocket wouldn’t blow up.</p><p><img src="/images/2017/05/ariane-v.jpg"></p><p>What’s the answer? <code>yes</code> or <code>no</code>?</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">0.7</span>;</span><br><span class="line"><span class="built_in">printf</span>(x == <span class="number">0.7</span> ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>)</span><br></pre></td></tr></table></figure><p>What will be printed?</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">4</span> / <span class="number">3</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%f&quot;</span>, x);</span><br></pre></td></tr></table></figure><p>What’s the answer? <code>yes</code> or <code>no</code>?</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">1.0</span>/<span class="number">3.0</span>;</span><br><span class="line"><span class="keyword">double</span> y = <span class="number">1.0</span>/<span class="number">1234567.0</span>;</span><br><span class="line"><span class="built_in">printf</span>(((x+y) - x) == y ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>);</span><br></pre></td></tr></table></figure><p>Are both lines equal?</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">0.20</span>;</span><br><span class="line"><span class="keyword">double</span> y = <span class="number">0.20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%4.20f\n&quot;</span>, x);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%4.20f\n&quot;</span>, y);</span><br></pre></td></tr></table></figure><p>Now that I’ve got your attention, lets go over the answers real quick. Once you get to the end of this blog post, You’ll understand them fully and be able to impress your coworkers with useless knowledge.</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">0.7</span>;</span><br><span class="line"><span class="built_in">printf</span>(x == <span class="number">0.7</span> ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>)</span><br></pre></td></tr></table></figure><p>output: <code>no</code>.</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">4</span> / <span class="number">3</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.3f&quot;</span>, x);</span><br></pre></td></tr></table></figure><p>output: <code>1.000</code></p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">1.0</span>/<span class="number">3.0</span>;</span><br><span class="line"><span class="keyword">double</span> y = <span class="number">1.0</span>/<span class="number">1234567.0</span>;</span><br><span class="line"><span class="built_in">printf</span>(((x+y) - x) == y ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>);</span><br></pre></td></tr></table></figure><p>output: <code>no</code>.</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">0.20</span>;</span><br><span class="line"><span class="keyword">double</span> y = <span class="number">0.20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%4.20f\n&quot;</span>, x);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%4.20f\n&quot;</span>, y);</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0.20000000298023223877</span><br><span class="line">0.20000000000000001110</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="IEEE-754"><a href="#IEEE-754" class="headerlink" title="IEEE 754"></a>IEEE 754</h2><p>From Wikipedia’s <a href="https://en.wikipedia.org/wiki/IEEE_floating_point" target="_blank" rel="noopener">IEEE Floating Point</a> -</p><blockquote></blockquote><p>The IEEE Standard for Floating-Point Arithmetic (<a href="http://ieeexplore.ieee.org/document/30711/" target="_blank" rel="noopener">IEEE 754</a>) is a technical standard for floating-point computation established in 1985 by the Institute of Electrical and Electronics Engineers (IEEE).</p><blockquote><p>The standard addressed many problems found in the diverse floating point implementations that made them difficult to use reliably and portably.</p></blockquote><p><strong>TL;DR</strong>: A standard for floating points. nowadays, supported on most hardware.</p><h2 id="Binary-Fractions"><a href="#Binary-Fractions" class="headerlink" title="Binary Fractions"></a>Binary Fractions</h2><p>Let’s take a look at the following binary fractions:</p><table><thead><tr><th align="center">number</th><th align="center">binary</th></tr></thead><tbody><tr><td align="center">$$ 5\frac{3}{4} $$</td><td align="center">101.112</td></tr><tr><td align="center">$$ 2\frac{7}{8} $$</td><td align="center">10.1112</td></tr><tr><td align="center">$$ 5\frac{63}{64} $$</td><td align="center">0.1111112</td></tr></tbody></table><p>Think about that - binary fractions? how can binary digits represent fractions?<br>Well, they don’t. Many numbers are an estimation of the real number, and the more bits you have for the fractions part, the more precise it is.</p><table><thead><tr><th align="center">value</th><th align="center">binary</th><th align="center">float</th></tr></thead><tbody><tr><td align="center">$$ \frac{1}{3} $$</td><td align="center">0.0101010101[01]…</td><td align="center">0.33333334326744…</td></tr><tr><td align="center">$$ \frac{1}{5} $$</td><td align="center">0.00110011[0011]…</td><td align="center">0.20000000298023…</td></tr><tr><td align="center">$$ \frac{1}{10} $$</td><td align="center">0.000110011[0011]…</td><td align="center">0.10000000149011…</td></tr></tbody></table><h2 id="The-standard"><a href="#The-standard" class="headerlink" title="The standard"></a>The standard</h2><p><img src="/images/2017/05/float.gif"></p><ul><li><code>s</code>: The sign bit. It determines if the number is positive or negative.</li><li><code>exponent</code> or <code>E</code>: The “weight” of the number in powers of two.</li><li><code>mantissa</code>: The fraction part, normalize to <code>1.x</code> or <code>0.x</code>.</li></ul><p>As you can see, you can control the accuracy of the number:</p><p>Bigger exponent -&gt; You can represent a bigger number<br>Bigger Mantissa -&gt; The fraction will be more precise</p><p>As for the standard: A double precision floating point (aka, <code>double</code>) is much more accurate than a regular <code>floating point</code> (aka, <code>float</code>).</p><h3 id="Bias"><a href="#Bias" class="headerlink" title="Bias"></a>Bias</h3><p>the exponent part needs to represent both negative and positive powers (i.e, fractions). To do that, the standard introduces the <em>bias</em>.</p><p>basically, the bias is used to represent the exponent as an unsigned int:<br>$$ bias = {2^{sizeof(exponent) - 1}} - 1 $$</p><p>for instance, in a floating point, the size of the exponent is 8 bits, so the bias would be:<br>$$ {2^{(8 - 1)}} - 1 = {2^7} - 1 = 128 - 1 = 127 $$</p><p>That means that for a floating point, the exponent range would be cut in half, to represent both negative and positive numbers.</p><h3 id="Deep-Dive"><a href="#Deep-Dive" class="headerlink" title="Deep Dive"></a>Deep Dive</h3><p>Let’s break down the number <code>-118.625</code><br><img src="/images/2017/05/Float_point_example_frac.svg"></p><p>We’re talking about a negative number, so the sign bit is set.</p><p>Now, for the technical part:</p><ul><li>$$ {118_{10}} = {110110_2} $$</li><li>$$ {0.625_{10}} = \frac{1}{2} + \frac{1}{8} = 1 \times {2^{ - 1}} + 0 \times {2^{ - 2}} + 1 \times {2^{-2}} = {.101_2} $$<br>So our number would be: <code>1110110.101</code></li></ul><p>The fraction part is made of the <code>.x</code> part of the <code>1.x</code> number.<br>So we “shift” <code>1110110.101</code> 6 bits left, and get the following mantissa: <code>110110101</code>.</p><p>What about the exponent? because we shifted the number 6 bits left, the exponent would be <code>6</code>, or <code>110</code> in binary. But we need to include the bias as well.</p><p>$$<br>bias = {2^{8 - 1}} - 1 = 127<br>$$<br>$$<br>e = E + bias \to 6 + 127 = 133<br>$$</p><p>which is <code>1000101</code> in binary.</p><p>A couple of pointers (haha) before we get to the categorization…</p><ul><li><code>E</code> is the original exponent = 6.</li><li><code>e</code> is the biases exponent = 133.</li></ul><h3 id="Categories-of-numbers"><a href="#Categories-of-numbers" class="headerlink" title="Categories of numbers"></a>Categories of numbers</h3><p>Remember I said earlier that the mantissa holds numbers in the form of <code>1.x</code> and <code>0.x</code>? well, these are the two categories.there are more.</p><ul><li>If both the exponent and the mantissa are zero, then the number is <code>0</code>.</li><li>If the exponent is zero, but the mantissa is not, the number is <code>0.x</code>.</li><li>If both the exponent and the mantissa are non zero, the number is <code>1.x</code>.</li><li>if the exponent is filled with ones (111…) and the mantissa is zero, the number is +-infinity (determined by the sign bit)</li><li>if the exponent is filled with ones (111…) and the mantissa is non zero, the number doesn’t exist. for instance: <code>sqrt(-1)</code>.</li></ul><p>Really small numbers that can’t be represented in the <code>1.x</code> form (normalized), are called denormalized.</p><h3 id="Denormalized-numbers"><a href="#Denormalized-numbers" class="headerlink" title="Denormalized numbers"></a>Denormalized numbers</h3><p>Let’s take a look at the following two numbers: x and y.</p><p>x will be the smaller possible normalized number in float<br>$$ x = 1.0000 \times {2^{ - 126}} $$</p><p>y will be another really small number:</p><p>$$ y = 1.1 \times {2^{ - 126}} $$</p><p>If we subtract x from y, we’ll get $$ 0.1 \times {2^{( - 126)}} $$. That’s a smaller number than is possible in the normalized spec.</p><p>But that’s a REALLY small number, so why not just round it to zero?</p><p>Well, if we do that, that the common assumption that <code>x - y = 0</code> if and only if <code>x == y</code> breaks. To make sure we don’t blow up the universe, we need to find a solution to gradually move between normalized numbers to zero.</p><p>The solution? use a fixed point representation, where the point is the smaller possible exponent (-126). The bias in this situation should be the smallest possible number, and <code>E</code> accordingly:</p><p>$$ E = 1 - bias $$</p><p>Now, if we drop the <code>1.x</code> requirement that normal numbers have, and fix the exponent to <code>-126</code>, we’re able to represent even smaller numbers than <code>1.x</code> allows, in the form of:<br>$$ ({a_1}{2^{ - 1}} + {a_2}{2^{ - 2}} + … + {a_{23}}{2^{ - 23}}) \times {2^{ - 126}} $$</p><p><strong>!</strong> why 23? because in doubles, the fraction part holds 23 bits.</p><p> specifically, we’ll be able to represent <code>y-x</code>. We can’t move the point beyond <code>-126</code>, which means that any further calculation can’t take the number any lower.</p><p>Adding the denormalized representation allows floating points to represent even smaller numbers than the normalized spec allows.</p><h2 id="Rounding"><a href="#Rounding" class="headerlink" title="Rounding"></a>Rounding</h2><p>Sounds like a big deal, but really all the means is:</p><ol><li>Calculate the result</li><li>Round it to the requested precision</li></ol><p>The standard supports a number of rounding algorithms:</p><ul><li>Zero</li><li>Round Up: +infinity</li><li>Round down: -infinity</li><li>Nearest even</li></ul><p>The default is nearest even, you can’t really control that easily.</p><p>Rounding is a big mess, and the culprit for many nasty bugs.<br>If the result overflows and/or rounding occurs, simple arithmetic might not work:<br>$$ (3.14 + {10^{10}}) - {10^{10}} == 3.14 + ({10^{10}} - {10^{10}})? $$</p><p>The former <strong>is not equal</strong> because $$ 3.14 + {10^{10}} $$ is rounded!</p><p>That means that when we cast one type to another, we need to make sure we don’t overflow. otherwise, rounding occurs and might make our code blow up. literally.</p><p><img src="/images/2017/05/ariane-v.jpg"></p><p>What happened? a <code>double</code> was casted into an <code>int</code> which caused the whole system to go haywire. You can read more <a href="https://around.com/ariane.html" target="_blank" rel="noopener">here</a>.</p><h2 id="Optimizations"><a href="#Optimizations" class="headerlink" title="Optimizations"></a>Optimizations</h2><p>Theoretically, the compiler can take this stupid piece of code:</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x = a + b + c;</span><br><span class="line">y = b + c + d;</span><br></pre></td></tr></table></figure><p>and optimize it:</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">t = b + c;</span><br><span class="line">x = a + t;</span><br><span class="line">y = t + d;</span><br></pre></td></tr></table></figure><p>But because we might overflow, the associative nature of numbers doesn’t work here. In other words, the compiler won’t perform any optimization!</p><p>gcc has two flags that optimize floats:</p><ul><li><code>-fassociative-math</code> which allows to re-associate floating point operations</li><li><code>-ffast-math</code> which allows even more aggressive accuracy vs speed trade-offs.</li></ul><h2 id="Back-to-the-questions"><a href="#Back-to-the-questions" class="headerlink" title="Back to the questions"></a>Back to the questions</h2><p><img src="/images/2017/05/kxcd_floating_point.png"></p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">0.7</span>;</span><br><span class="line"><span class="built_in">printf</span>(x == <span class="number">0.7</span> ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>)</span><br></pre></td></tr></table></figure><p>x is a float, but 0.7 is not. The binary representation of them is different, which causes the confusion.</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">4</span> / <span class="number">3</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%f&quot;</span>, x);</span><br></pre></td></tr></table></figure><p><code>4</code> and <code>3</code> are both integers, <code>/</code> operator divides them as integers, and returns an integer as the result, then is implicitly casted to a float.</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">1.0</span>/<span class="number">3.0</span>;</span><br><span class="line"><span class="keyword">double</span> y = <span class="number">1.0</span>/<span class="number">1234567.0</span>;</span><br><span class="line"><span class="built_in">printf</span>(((x+y) - x) == y ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>);</span><br></pre></td></tr></table></figure><p><code>(x+y) - x</code> lost some precision when <code>x</code> was added and subtracted, so even though mathematically it looks correct, the binary estimation is different. Take a look at <a href="http://stackoverflow.com/a/18686946" target="_blank" rel="noopener">Compare floats to three decimal places</a> to see a way to mitigate that.</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> x = <span class="number">0.20</span>;</span><br><span class="line"><span class="keyword">double</span> y = <span class="number">0.20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%4.20f\n&quot;</span>, x);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%4.20f\n&quot;</span>, y);</span><br></pre></td></tr></table></figure><p>Again, both numbers are represented differently in memory.</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><ul><li>Be VERY careful when casting between types.</li><li>Don’t ignore compiler warnings. Actually, set your compiler to <em>warning as error</em></li><li>Test everything. especially delicate code (sounds obvious right? it’s not!)</li></ul></div><footer class="article-footer"><div class="share-container"><a href="https://www.addtoany.com/share" class="a2a_dd article-share-link" target="_blank" data-a2a-title="Do you REALLY understand floating points?" data-a2a-url="https://oded.dev/2017/05/01/Do-you-REALLY-understand-floating-points/" rel="noopener"><i class="fa fa-share"></i> Share</a></div></footer></div><nav id="article-nav"> <a href="/2017/05/07/Nuclear-Gandhi-Binary-Arithmetic/" class="article-nav-link-wrap" id="article-nav-newer"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title"> Nuclear Gandhi &amp; Binary Arithmetic</div></a> <a href="/2017/04/29/1st-place-HackIDC-2017/" class="article-nav-link-wrap" id="article-nav-older"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">1st place @ HackIDC 2017</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">recent</h3><div class="widget"><ul class="no-thumbnail" id="recent-post"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2021/02/22/SSH-GlobalProtect/" class="title">Working from Home + Corporate VPN</a></p><p class="item-date"><time datetime="2021-02-22T17:30:03.000Z" itemprop="datePublished">2021-02-22</time></p></div></li><li><div class="item-inner"><p class="item-category"><a href="/categories/hacking/" class="article-category-link">hacking</a></p><p class="item-title"><a href="/2020/11/30/AX3600-1/" class="title">AX3600 - Post #1</a></p><p class="item-date"><time datetime="2020-11-30T19:08:00.000Z" itemprop="datePublished">2020-11-30</time></p></div></li><li><div class="item-inner"><p class="item-category"><a href="/categories/hacking/" class="article-category-link">hacking</a></p><p class="item-title"><a href="/2020/10/23/AX3600-0/" class="title">AX3600 - Post #0</a></p><p class="item-date"><time datetime="2020-10-23T13:34:10.000Z" itemprop="datePublished">2020-10-23</time></p></div></li><li><div class="item-inner"><p class="item-category"><a href="/categories/devops/" class="article-category-link">devops</a></p><p class="item-title"><a href="/2018/01/12/wips_weather/" class="title">Getting an Accurate Weather Forecast using Wi-Fi Position System</a></p><p class="item-date"><time datetime="2018-01-12T21:01:09.000Z" itemprop="datePublished">2018-01-12</time></p></div></li><li><div class="item-inner"><p class="item-category"><a href="/categories/thoughts/" class="article-category-link">thoughts</a><i class="fa fa-angle-right"></i><a href="/categories/thoughts/programming/" class="article-category-link">programming</a></p><p class="item-title"><a href="/2017/11/28/not_an_lang_dev/" class="title">You&#39;re not a Java Developer</a></p><p class="item-date"><time datetime="2017-11-28T08:53:00.000Z" itemprop="datePublished">2017-11-28</time></p></div></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">tag cloud</h3><div class="widget tagcloud"> <a href="/tags/netcore/" style="font-size:10px">.netcore</a> <a href="/tags/algorithm/" style="font-size:10px">algorithm</a> <a href="/tags/assembly/" style="font-size:11.11px">assembly</a> <a href="/tags/awk/" style="font-size:10px">awk</a> <a href="/tags/ax3600/" style="font-size:11.11px">ax3600</a> <a href="/tags/bash/" style="font-size:12.22px">bash</a> <a href="/tags/byobu/" style="font-size:10px">byobu</a> <a href="/tags/c/" style="font-size:14.44px">c</a> <a href="/tags/c/" style="font-size:15.56px">c++</a> <a href="/tags/concurrency/" style="font-size:12.22px">concurrency</a> <a href="/tags/cybereason/" style="font-size:11.11px">cybereason</a> <a href="/tags/data-structures/" style="font-size:10px">data-structures</a> <a href="/tags/databases/" style="font-size:10px">databases</a> <a href="/tags/debian/" style="font-size:10px">debian</a> <a href="/tags/devops/" style="font-size:10px">devops</a> <a href="/tags/digitalocean/" style="font-size:11.11px">digitalocean</a> <a href="/tags/direnv/" style="font-size:11.11px">direnv</a> <a href="/tags/docker/" style="font-size:11.11px">docker</a> <a href="/tags/fingerprint/" style="font-size:10px">fingerprint</a> <a href="/tags/ghost/" style="font-size:13.33px">ghost</a> <a href="/tags/gici/" style="font-size:11.11px">gici</a> <a href="/tags/gnome/" style="font-size:10px">gnome</a> <a href="/tags/golang/" style="font-size:14.44px">golang</a> <a href="/tags/h-264/" style="font-size:10px">h.264</a> <a href="/tags/hackathon/" style="font-size:11.11px">hackathon</a> <a href="/tags/hexo/" style="font-size:11.11px">hexo</a> <a href="/tags/idiom/" style="font-size:13.33px">idiom</a> <a href="/tags/language-server-protocol/" style="font-size:10px">language-server-protocol</a> <a href="/tags/linux/" style="font-size:18.89px">linux</a> <a href="/tags/lsp/" style="font-size:10px">lsp</a> <a href="/tags/math/" style="font-size:10px">math</a> <a href="/tags/neovim/" style="font-size:10px">neovim</a> <a href="/tags/networking/" style="font-size:10px">networking</a> <a href="/tags/ocr/" style="font-size:10px">ocr</a> <a href="/tags/optimization/" style="font-size:13.33px">optimization</a> <a href="/tags/pgp/" style="font-size:10px">pgp</a> <a href="/tags/productivity/" style="font-size:17.78px">productivity</a> <a href="/tags/project/" style="font-size:16.67px">project</a> <a href="/tags/python/" style="font-size:20px">python</a> <a href="/tags/regex/" style="font-size:10px">regex</a> <a href="/tags/screen/" style="font-size:10px">screen</a> <a href="/tags/tmux/" style="font-size:12.22px">tmux</a> <a href="/tags/tor/" style="font-size:10px">tor</a> <a href="/tags/vim/" style="font-size:12.22px">vim</a> <a href="/tags/vscode/" style="font-size:10px">vscode</a> <a href="/tags/web-scraping/" style="font-size:10px">web-scraping</a> <a href="/tags/xiaomi/" style="font-size:11.11px">xiaomi</a></div></div><div class="widget-wrap"><h3 class="widget-title">categories</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a href="/categories/announcement/" class="category-list-link">announcement</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a href="/categories/announcement/blog/" class="category-list-link">blog</a><span class="category-list-count">3</span></li><li class="category-list-item"><a href="/categories/announcement/general/" class="category-list-link">general</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a href="/categories/devops/" class="category-list-link">devops</a><span class="category-list-count">26</span><ul class="category-list-child"><li class="category-list-item"><a href="/categories/devops/programming/" class="category-list-link">programming</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a href="/categories/general/" class="category-list-link">general</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a href="/categories/general/book/" class="category-list-link">book</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a href="/categories/hacking/" class="category-list-link">hacking</a><span class="category-list-count">2</span></li><li class="category-list-item"><a href="/categories/new-years-resolution/" class="category-list-link">new-years-resolution</a><span class="category-list-count">1</span></li><li class="category-list-item"><a href="/categories/programming/" class="category-list-link">programming</a><span class="category-list-count">50</span><ul class="category-list-child"><li class="category-list-item"><a href="/categories/programming/infosec/" class="category-list-link">infosec</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a href="/categories/thoughts/" class="category-list-link">thoughts</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a href="/categories/thoughts/devops/" class="category-list-link">devops</a><span class="category-list-count">1</span></li><li class="category-list-item"><a href="/categories/thoughts/general/" class="category-list-link">general</a><span class="category-list-count">1</span></li><li class="category-list-item"><a href="/categories/thoughts/infosec/" class="category-list-link">infosec</a><span class="category-list-count">4</span></li><li class="category-list-item"><a href="/categories/thoughts/programming/" class="category-list-link">programming</a><span class="category-list-count">1</span></li></ul></li></ul></div></div><div class="fa fa-angle-up" id="toTop"></div></aside></div><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"> <input class="ins-search-input" placeholder="Type something..."><span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><footer id="footer"><div class="outer"><div class="inner" id="footer-info"> Copyright &copy; 2021 Oded Lazar. All Right Reserved.</div></div></footer></div><script src="/js/jquery-2.2.4.min.js"></script><script>var a2a_config=a2a_config||{};a2a_config.onclick=0,a2a_config.prioritize=["linkedin","twitter","reddit","hacker_news","facebook","google_plus","whatsapp","pocket"]</script><script src="https://static.addtoany.com/menu/page.js" async></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/bootstrap.js"></script></body></html>